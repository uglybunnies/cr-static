import{S as yr,i as Ar,s as br,a as L,k as c,q as J,N as wr,h as s,c as F,l,m as d,r as Q,n as m,b as Dr,G as i,K as Lr,H as hr,o as Fr,M as Ur}from"../chunks/index.76e64b4f.js";const{document:_r}=Ur;function Pr(or){let p,u,N,U,oe,Ne,r,D,Ye,C,Z,$,_,Be,ee,g,Ge,y,Ve,De,he,He,We,ke,Ke,pe,W,qe,je,k,P,ue,xe,_e,ye,Je,S,x,h,se,ve,z,Ae,B,K,Ee,q,Ie,be,X,Y,re,ge,we,G,A,ne,ce,V,Te,Se,R,le,Le,Qe,w,fe,Ze,de,Fe,Oe,j,Re,$e,me,Ue,er,ur;return{c(){p=L(),u=c("main"),N=c("div"),U=L(),oe=c("canvas"),Ne=L(),r=c("section"),D=c("p"),Ye=J("Welcome to"),C=L(),Z=c("h2"),$=c("span"),_=J("Creative"),Be=c("br"),ee=c("span"),g=c("span"),Ge=J("R"),y=J("esilience"),Ve=L(),De=c("p"),he=c("span"),He=J("You are invited on a journey to enhance creative awareness and emotional resilience guided by the five natural elements. May the meditations, psychological exercises, and artistry offered within enhance your inner world and bring wisdom and joy."),We=L(),ke=c("br"),Ke=L(),pe=c("p"),W=c("a"),qe=J("Enter experience"),je=L(),k=c("section"),P=c("div"),ue=c("a"),xe=c("div"),_e=c("h3"),ye=c("span"),Je=J("Space"),S=L(),x=c("a"),h=c("div"),se=c("h3"),ve=c("span"),z=J("Earth"),Ae=L(),B=c("a"),K=c("div"),Ee=c("h3"),q=c("span"),Ie=J("Wind"),be=L(),X=c("a"),Y=c("div"),re=c("h3"),ge=c("span"),we=J("Fire"),G=L(),A=c("a"),ne=c("div"),ce=c("h3"),V=c("span"),Te=J("Water"),Se=L(),R=c("div"),le=c("div"),Le=c("div"),Qe=L(),w=c("div"),fe=c("div"),Ze=L(),de=c("div"),Fe=c("div"),Oe=L(),j=c("div"),Re=c("div"),$e=L(),me=c("div"),Ue=c("div"),this.h()},l(te){wr("svelte-1fxwdp8",_r.head).forEach(s),p=F(te),u=l(te,"MAIN",{class:!0});var ae=d(u);N=l(ae,"DIV",{class:!0,id:!0}),d(N).forEach(s),U=F(ae),oe=l(ae,"CANVAS",{id:!0}),d(oe).forEach(s),Ne=F(ae),r=l(ae,"SECTION",{class:!0,id:!0});var H=d(r);D=l(H,"P",{class:!0});var sr=d(D);Ye=Q(sr,"Welcome to"),sr.forEach(s),C=F(H),Z=l(H,"H2",{class:!0});var Me=d(Z);$=l(Me,"SPAN",{class:!0});var nr=d($);_=Q(nr,"Creative"),nr.forEach(s),Be=l(Me,"BR",{}),ee=l(Me,"SPAN",{class:!0});var Ce=d(ee);g=l(Ce,"SPAN",{class:!0});var vr=d(g);Ge=Q(vr,"R"),vr.forEach(s),y=Q(Ce,"esilience"),Ce.forEach(s),Me.forEach(s),Ve=F(H),De=l(H,"P",{});var ze=d(De);he=l(ze,"SPAN",{class:!0});var tr=d(he);He=Q(tr,"You are invited on a journey to enhance creative awareness and emotional resilience guided by the five natural elements. May the meditations, psychological exercises, and artistry offered within enhance your inner world and bring wisdom and joy."),tr.forEach(s),ze.forEach(s),We=F(H),ke=l(H,"BR",{}),Ke=F(H),pe=l(H,"P",{class:!0});var ar=d(pe);W=l(ar,"A",{href:!0,class:!0,id:!0});var cr=d(W);qe=Q(cr,"Enter experience"),cr.forEach(s),ar.forEach(s),H.forEach(s),je=F(ae),k=l(ae,"SECTION",{class:!0,id:!0});var Xe=d(k);P=l(Xe,"DIV",{class:!0});var O=d(P);ue=l(O,"A",{href:!0,class:!0});var lr=d(ue);xe=l(lr,"DIV",{class:!0});var fr=d(xe);_e=l(fr,"H3",{});var Pe=d(_e);ye=l(Pe,"SPAN",{});var dr=d(ye);Je=Q(dr,"Space"),dr.forEach(s),Pe.forEach(s),fr.forEach(s),lr.forEach(s),S=F(O),x=l(O,"A",{href:!0,class:!0});var I=d(x);h=l(I,"DIV",{class:!0});var mr=d(h);se=l(mr,"H3",{});var e=d(se);ve=l(e,"SPAN",{});var t=d(ve);z=Q(t,"Earth"),t.forEach(s),e.forEach(s),mr.forEach(s),I.forEach(s),Ae=F(O),B=l(O,"A",{href:!0,class:!0});var n=d(B);K=l(n,"DIV",{class:!0});var a=d(K);Ee=l(a,"H3",{});var o=d(Ee);q=l(o,"SPAN",{});var v=d(q);Ie=Q(v,"Wind"),v.forEach(s),o.forEach(s),a.forEach(s),n.forEach(s),be=F(O),X=l(O,"A",{href:!0,class:!0});var f=d(X);Y=l(f,"DIV",{class:!0});var E=d(Y);re=l(E,"H3",{});var T=d(re);ge=l(T,"SPAN",{});var b=d(ge);we=Q(b,"Fire"),b.forEach(s),T.forEach(s),E.forEach(s),f.forEach(s),G=F(O),A=l(O,"A",{href:!0,class:!0});var M=d(A);ne=l(M,"DIV",{class:!0});var ir=d(ne);ce=l(ir,"H3",{});var pr=d(ce);V=l(pr,"SPAN",{});var xr=d(V);Te=Q(xr,"Water"),xr.forEach(s),pr.forEach(s),ir.forEach(s),M.forEach(s),O.forEach(s),Se=F(Xe),R=l(Xe,"DIV",{class:!0});var ie=d(R);le=l(ie,"DIV",{class:!0});var Er=d(le);Le=l(Er,"DIV",{class:!0}),d(Le).forEach(s),Er.forEach(s),Qe=F(ie),w=l(ie,"DIV",{class:!0});var gr=d(w);fe=l(gr,"DIV",{class:!0}),d(fe).forEach(s),gr.forEach(s),Ze=F(ie),de=l(ie,"DIV",{class:!0});var Tr=d(de);Fe=l(Tr,"DIV",{class:!0}),d(Fe).forEach(s),Tr.forEach(s),Oe=F(ie),j=l(ie,"DIV",{class:!0});var Sr=d(j);Re=l(Sr,"DIV",{class:!0}),d(Re).forEach(s),Sr.forEach(s),$e=F(ie),me=l(ie,"DIV",{class:!0});var Rr=d(me);Ue=l(Rr,"DIV",{class:!0}),d(Ue).forEach(s),Rr.forEach(s),ie.forEach(s),Xe.forEach(s),ae.forEach(s),this.h()},h(){_r.title="Welcome to Creative Resilience",m(N,"class","bg-image"),m(N,"id","bgImage"),m(oe,"id","smokeCursor"),m(D,"class","welcome"),m($,"class","regular"),m(g,"class","initial"),m(ee,"class","ital"),m(Z,"class","intro-title"),m(he,"class","wipe-in"),m(W,"href","#"),m(W,"class","cta-enter"),m(W,"id","enterButton"),m(pe,"class","enter-site"),m(r,"class","intro"),m(r,"id","scene1"),m(xe,"class","circle"),m(ue,"href","space"),m(ue,"class","space"),m(h,"class","circle"),m(x,"href","earth"),m(x,"class","earth"),m(K,"class","circle"),m(B,"href","wind"),m(B,"class","wind"),m(Y,"class","circle"),m(X,"href","fire"),m(X,"class","fire"),m(ne,"class","circle"),m(A,"href","water"),m(A,"class","water"),m(P,"class","mandala"),m(Le,"class","circle"),m(le,"class","space"),m(fe,"class","circle"),m(w,"class","earth"),m(Fe,"class","circle"),m(de,"class","wind"),m(Re,"class","circle"),m(j,"class","fire"),m(Ue,"class","circle"),m(me,"class","water"),m(R,"class","mandala-circles"),R.hidden=!0,m(k,"class","mandala-wrap"),m(k,"id","scene2"),m(u,"class","home no-pad")},m(te,rr){Dr(te,p,rr),Dr(te,u,rr),i(u,N),i(u,U),i(u,oe),i(u,Ne),i(u,r),i(r,D),i(D,Ye),i(r,C),i(r,Z),i(Z,$),i($,_),i(Z,Be),i(Z,ee),i(ee,g),i(g,Ge),i(ee,y),i(r,Ve),i(r,De),i(De,he),i(he,He),i(r,We),i(r,ke),i(r,Ke),i(r,pe),i(pe,W),i(W,qe),i(u,je),i(u,k),i(k,P),i(P,ue),i(ue,xe),i(xe,_e),i(_e,ye),i(ye,Je),i(P,S),i(P,x),i(x,h),i(h,se),i(se,ve),i(ve,z),i(P,Ae),i(P,B),i(B,K),i(K,Ee),i(Ee,q),i(q,Ie),i(P,be),i(P,X),i(X,Y),i(Y,re),i(re,ge),i(ge,we),i(P,G),i(P,A),i(A,ne),i(ne,ce),i(ce,V),i(V,Te),i(k,Se),i(k,R),i(R,le),i(le,Le),i(R,Qe),i(R,w),i(w,fe),i(R,Ze),i(R,de),i(de,Fe),i(R,Oe),i(R,j),i(j,Re),i(R,$e),i(R,me),i(me,Ue),er||(ur=Lr(W,"click",Nr),er=!0)},p:hr,i:hr,o:hr,d(te){te&&s(p),te&&s(u),er=!1,ur()}}}function Nr(or){or.preventDefault();let p=document.getElementById("bgImage"),u=document.getElementById("scene1"),N=document.getElementById("scene2");u==null||u.classList.add("hide"),p==null||p.classList.add("play"),N==null||N.classList.add("play")}function Br(or){return Fr(()=>{const p=document.getElementById("smokeCursor");me();let u={SIM_RESOLUTION:128,DYE_RESOLUTION:1024,CAPTURE_RESOLUTION:512,DENSITY_DISSIPATION:.98,VELOCITY_DISSIPATION:.99,PRESSURE:.8,PRESSURE_ITERATIONS:25,CURL:1,SPLAT_RADIUS:.3,SPLAT_FORCE:1e3,SHADING:!0,COLORFUL:!0,COLOR_UPDATE_SPEED:.9,BACK_COLOR:{r:0,g:0,b:0},TRANSPARENT:!0,SUNRAYS:!1,SUNRAYS_RESOLUTION:196,SUNRAYS_WEIGHT:1};function N(){this.id=-1,this.texcoordX=0,this.texcoordY=0,this.prevTexcoordX=0,this.prevTexcoordY=0,this.deltaX=0,this.deltaY=0,this.down=!1,this.moved=!1,this.color=[30,0,300]}var U=[],oe=[];U.push(new N);var Ne=Ye(p),r=Ne.gl,D=Ne.ext;D.supportLinearFiltering||(u.DYE_RESOLUTION=512,u.SHADING=!1,u.BLOOM=!1,u.SUNRAYS=!1);function Ye(e){var t={alpha:!0,depth:!1,stencil:!1,antialias:!1,preserveDrawingBuffer:!1},n=e.getContext("webgl2",t),a=!!n;a||(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t));var o,v;a?(n.getExtension("EXT_color_buffer_float"),v=n.getExtension("OES_texture_float_linear")):(o=n.getExtension("OES_texture_half_float"),v=n.getExtension("OES_texture_half_float_linear")),n.clearColor(0,0,0,1);var f=a?n.HALF_FLOAT:o.HALF_FLOAT_OES,E,T,b;return a?(E=C(n,n.RGBA16F,n.RGBA,f),T=C(n,n.RG16F,n.RG,f),b=C(n,n.R16F,n.RED,f)):(E=C(n,n.RGBA,n.RGBA,f),T=C(n,n.RGBA,n.RGBA,f),b=C(n,n.RGBA,n.RGBA,f)),{gl:n,ext:{formatRGBA:E,formatRG:T,formatR:b,halfFloatTexType:f,supportLinearFiltering:v}}}function C(e,t,n,a){if(!Z(e,t,n,a))switch(t){case e.R16F:return C(e,e.RG16F,e.RG,a);case e.RG16F:return C(e,e.RGBA16F,e.RGBA,a);default:return null}return{internalFormat:t,format:n}}function Z(e,t,n,a){var o=e.createTexture();e.bindTexture(e.TEXTURE_2D,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,n,a,null);var v=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,v),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,o,0);var f=e.checkFramebufferStatus(e.FRAMEBUFFER);return f==e.FRAMEBUFFER_COMPLETE}var $=function(t,n){this.vertexShader=t,this.fragmentShaderSource=n,this.programs=[],this.activeProgram=null,this.uniforms=[]};$.prototype.setKeywords=function(t){for(var n=0,a=0;a<t.length;a++)n+=mr(t[a]);var o=this.programs[n];if(o==null){var v=g(r.FRAGMENT_SHADER,this.fragmentShaderSource,t);o=Be(this.vertexShader,v),this.programs[n]=o}o!=this.activeProgram&&(this.uniforms=ee(o),this.activeProgram=o)},$.prototype.bind=function(){r.useProgram(this.activeProgram)};var _=function(t,n){this.uniforms={},this.program=Be(t,n),this.uniforms=ee(this.program)};_.prototype.bind=function(){r.useProgram(this.program)};function Be(e,t){var n=r.createProgram();if(r.attachShader(n,e),r.attachShader(n,t),r.linkProgram(n),!r.getProgramParameter(n,r.LINK_STATUS))throw r.getProgramInfoLog(n);return n}function ee(e){for(var t=[],n=r.getProgramParameter(e,r.ACTIVE_UNIFORMS),a=0;a<n;a++){var o=r.getActiveUniform(e,a).name;t[o]=r.getUniformLocation(e,o)}return t}function g(e,t,n){t=Ge(t,n);var a=r.createShader(e);if(r.shaderSource(a,t),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS))throw r.getShaderInfoLog(a);return a}function Ge(e,t){if(t==null)return e;var n="";return t.forEach(function(a){n+="#define "+a+`
`}),n+e}var y=g(r.VERTEX_SHADER,`
    precision highp float;

    attribute vec2 aPosition;
    varying vec2 vUv;
    varying vec2 vL;
    varying vec2 vR;
    varying vec2 vT;
    varying vec2 vB;
    uniform vec2 texelSize;

    void main () {
        vUv = aPosition * 0.5 + 0.5;
        vL = vUv - vec2(texelSize.x, 0.0);
        vR = vUv + vec2(texelSize.x, 0.0);
        vT = vUv + vec2(0.0, texelSize.y);
        vB = vUv - vec2(0.0, texelSize.y);
        gl_Position = vec4(aPosition, 0.0, 1.0);
    }
`),Ve=g(r.VERTEX_SHADER,`
    precision highp float;

    attribute vec2 aPosition;
    varying vec2 vUv;
    varying vec2 vL;
    varying vec2 vR;
    uniform vec2 texelSize;

    void main () {
        vUv = aPosition * 0.5 + 0.5;
        float offset = 1.33333333;
        vL = vUv - texelSize * offset;
        vR = vUv + texelSize * offset;
        gl_Position = vec4(aPosition, 0.0, 1.0);
    }
`),De=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying vec2 vUv;
    varying vec2 vL;
    varying vec2 vR;
    uniform sampler2D uTexture;

    void main () {
        vec4 sum = texture2D(uTexture, vUv) * 0.29411764;
        sum += texture2D(uTexture, vL) * 0.35294117;
        sum += texture2D(uTexture, vR) * 0.35294117;
        gl_FragColor = sum;
    }
`),he=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying highp vec2 vUv;
    uniform sampler2D uTexture;

    void main () {
        gl_FragColor = texture2D(uTexture, vUv);
    }
`),He=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying highp vec2 vUv;
    uniform sampler2D uTexture;
    uniform float value;

    void main () {
        gl_FragColor = value * texture2D(uTexture, vUv);
    }
`),We=g(r.FRAGMENT_SHADER,`
    precision mediump float;

    uniform vec4 color;

    void main () {
        gl_FragColor = color;
    }
`),ke=`
    precision highp float;
    precision highp sampler2D;

    varying vec2 vUv;
    varying vec2 vL;
    varying vec2 vR;
    varying vec2 vT;
    varying vec2 vB;
    uniform sampler2D uTexture;
    uniform sampler2D uBloom;
    uniform sampler2D uSunrays;
    uniform sampler2D uDithering;
    uniform vec2 ditherScale;
    uniform vec2 texelSize;

    vec3 linearToGamma (vec3 color) {
        color = max(color, vec3(0));
        return max(1.055 * pow(color, vec3(0.416666667)) - 0.055, vec3(0));
    }

    void main () {
        vec3 c = texture2D(uTexture, vUv).rgb;

    #ifdef SHADING
        vec3 lc = texture2D(uTexture, vL).rgb;
        vec3 rc = texture2D(uTexture, vR).rgb;
        vec3 tc = texture2D(uTexture, vT).rgb;
        vec3 bc = texture2D(uTexture, vB).rgb;

        float dx = length(rc) - length(lc);
        float dy = length(tc) - length(bc);

        vec3 n = normalize(vec3(dx, dy, length(texelSize)));
        vec3 l = vec3(0.0, 0.0, 1.0);

        float diffuse = clamp(dot(n, l) + 0.7, 0.7, 1.0);
        c *= diffuse;
    #endif

    #ifdef BLOOM
        vec3 bloom = texture2D(uBloom, vUv).rgb;
    #endif

    #ifdef SUNRAYS
        float sunrays = texture2D(uSunrays, vUv).r;
        c *= sunrays;
    #ifdef BLOOM
        bloom *= sunrays;
    #endif
    #endif

    #ifdef BLOOM
        float noise = texture2D(uDithering, vUv * ditherScale).r;
        noise = noise * 2.0 - 1.0;
        bloom += noise / 255.0;
        bloom = linearToGamma(bloom);
        c += bloom;
    #endif

        float a = max(c.r, max(c.g, c.b));
        gl_FragColor = vec4(c, a);
    }
`,Ke=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying vec2 vUv;
    uniform sampler2D uTexture;
    uniform vec3 curve;
    uniform float threshold;

    void main () {
        vec3 c = texture2D(uTexture, vUv).rgb;
        float br = max(c.r, max(c.g, c.b));
        float rq = clamp(br - curve.x, 0.0, curve.y);
        rq = curve.z * rq * rq;
        c *= max(rq, br - threshold) / max(br, 0.0001);
        gl_FragColor = vec4(c, 0.0);
    }
`),pe=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying vec2 vL;
    varying vec2 vR;
    varying vec2 vT;
    varying vec2 vB;
    uniform sampler2D uTexture;

    void main () {
        vec4 sum = vec4(0.0);
        sum += texture2D(uTexture, vL);
        sum += texture2D(uTexture, vR);
        sum += texture2D(uTexture, vT);
        sum += texture2D(uTexture, vB);
        sum *= 0.25;
        gl_FragColor = sum;
    }
`),W=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying vec2 vL;
    varying vec2 vR;
    varying vec2 vT;
    varying vec2 vB;
    uniform sampler2D uTexture;
    uniform float intensity;

    void main () {
        vec4 sum = vec4(0.0);
        sum += texture2D(uTexture, vL);
        sum += texture2D(uTexture, vR);
        sum += texture2D(uTexture, vT);
        sum += texture2D(uTexture, vB);
        sum *= 0.25;
        gl_FragColor = sum * intensity;
    }
`),qe=g(r.FRAGMENT_SHADER,`
    precision highp float;
    precision highp sampler2D;

    varying vec2 vUv;
    uniform sampler2D uTexture;

    void main () {
        vec4 c = texture2D(uTexture, vUv);
        float br = max(c.r, max(c.g, c.b));
        c.a = 1.0 - min(max(br * 20.0, 0.0), 0.8);
        gl_FragColor = c;
    }
`),je=g(r.FRAGMENT_SHADER,`
    precision highp float;
    precision highp sampler2D;

    varying vec2 vUv;
    uniform sampler2D uTexture;
    uniform float weight;

    #define ITERATIONS 16

    void main () {
        float Density = 0.3;
        float Decay = 0.95;
        float Exposure = 0.7;

        vec2 coord = vUv;
        vec2 dir = vUv - 0.5;

        dir *= 1.0 / float(ITERATIONS) * Density;
        float illuminationDecay = 1.0;

        float color = texture2D(uTexture, vUv).a;

        for (int i = 0; i < ITERATIONS; i++)
        {
            coord -= dir;
            float col = texture2D(uTexture, coord).a;
            color += col * illuminationDecay * weight;
            illuminationDecay *= Decay;
        }

        gl_FragColor = vec4(color * Exposure, 0.0, 0.0, 1.0);
    }
`),k=g(r.FRAGMENT_SHADER,`
    precision highp float;
    precision highp sampler2D;

    varying vec2 vUv;
    uniform sampler2D uTarget;
    uniform float aspectRatio;
    uniform vec3 color;
    uniform vec2 point;
    uniform float radius;

    void main () {
        vec2 p = vUv - point.xy;
        p.x *= aspectRatio;
        vec3 splat = exp(-dot(p, p) / radius) * color;
        vec3 base = texture2D(uTarget, vUv).xyz;
        gl_FragColor = vec4(base + splat, 1.0);
    }
`),P=g(r.FRAGMENT_SHADER,`
    precision highp float;
    precision highp sampler2D;

    varying vec2 vUv;
    uniform sampler2D uVelocity;
    uniform sampler2D uSource;
    uniform vec2 texelSize;
    uniform vec2 dyeTexelSize;
    uniform float dt;
    uniform float dissipation;

    vec4 bilerp (sampler2D sam, vec2 uv, vec2 tsize) {
        vec2 st = uv / tsize - 0.5;

        vec2 iuv = floor(st);
        vec2 fuv = fract(st);

        vec4 a = texture2D(sam, (iuv + vec2(0.5, 0.5)) * tsize);
        vec4 b = texture2D(sam, (iuv + vec2(1.5, 0.5)) * tsize);
        vec4 c = texture2D(sam, (iuv + vec2(0.5, 1.5)) * tsize);
        vec4 d = texture2D(sam, (iuv + vec2(1.5, 1.5)) * tsize);

        return mix(mix(a, b, fuv.x), mix(c, d, fuv.x), fuv.y);
    }

    void main () {
    #ifdef MANUAL_FILTERING
        vec2 coord = vUv - dt * bilerp(uVelocity, vUv, texelSize).xy * texelSize;
        vec4 result = bilerp(uSource, coord, dyeTexelSize);
    #else
        vec2 coord = vUv - dt * texture2D(uVelocity, vUv).xy * texelSize;
        vec4 result = texture2D(uSource, coord);
    #endif
        float decay = 1.0 + dissipation * dt;
        gl_FragColor = result / decay;
    }`,D.supportLinearFiltering?null:["MANUAL_FILTERING"]),ue=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying highp vec2 vUv;
    varying highp vec2 vL;
    varying highp vec2 vR;
    varying highp vec2 vT;
    varying highp vec2 vB;
    uniform sampler2D uVelocity;

    void main () {
        float L = texture2D(uVelocity, vL).x;
        float R = texture2D(uVelocity, vR).x;
        float T = texture2D(uVelocity, vT).y;
        float B = texture2D(uVelocity, vB).y;

        vec2 C = texture2D(uVelocity, vUv).xy;
        if (vL.x < 0.0) { L = -C.x; }
        if (vR.x > 1.0) { R = -C.x; }
        if (vT.y > 1.0) { T = -C.y; }
        if (vB.y < 0.0) { B = -C.y; }

        float div = 0.5 * (R - L + T - B);
        gl_FragColor = vec4(div, 0.0, 0.0, 1.0);
    }
`),xe=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying highp vec2 vUv;
    varying highp vec2 vL;
    varying highp vec2 vR;
    varying highp vec2 vT;
    varying highp vec2 vB;
    uniform sampler2D uVelocity;

    void main () {
        float L = texture2D(uVelocity, vL).y;
        float R = texture2D(uVelocity, vR).y;
        float T = texture2D(uVelocity, vT).x;
        float B = texture2D(uVelocity, vB).x;
        float vorticity = R - L - T + B;
        gl_FragColor = vec4(0.5 * vorticity, 0.0, 0.0, 1.0);
    }
`),_e=g(r.FRAGMENT_SHADER,`
    precision highp float;
    precision highp sampler2D;

    varying vec2 vUv;
    varying vec2 vL;
    varying vec2 vR;
    varying vec2 vT;
    varying vec2 vB;
    uniform sampler2D uVelocity;
    uniform sampler2D uCurl;
    uniform float curl;
    uniform float dt;

    void main () {
        float L = texture2D(uCurl, vL).x;
        float R = texture2D(uCurl, vR).x;
        float T = texture2D(uCurl, vT).x;
        float B = texture2D(uCurl, vB).x;
        float C = texture2D(uCurl, vUv).x;

        vec2 force = 0.5 * vec2(abs(T) - abs(B), abs(R) - abs(L));
        force /= length(force) + 0.0001;
        force *= curl * C;
        force.y *= -1.0;

        vec2 vel = texture2D(uVelocity, vUv).xy;
        gl_FragColor = vec4(vel + force * dt, 0.0, 1.0);
    }
`),ye=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying highp vec2 vUv;
    varying highp vec2 vL;
    varying highp vec2 vR;
    varying highp vec2 vT;
    varying highp vec2 vB;
    uniform sampler2D uPressure;
    uniform sampler2D uDivergence;

    void main () {
        float L = texture2D(uPressure, vL).x;
        float R = texture2D(uPressure, vR).x;
        float T = texture2D(uPressure, vT).x;
        float B = texture2D(uPressure, vB).x;
        float C = texture2D(uPressure, vUv).x;
        float divergence = texture2D(uDivergence, vUv).x;
        float pressure = (L + R + B + T - divergence) * 0.25;
        gl_FragColor = vec4(pressure, 0.0, 0.0, 1.0);
    }
`),Je=g(r.FRAGMENT_SHADER,`
    precision mediump float;
    precision mediump sampler2D;

    varying highp vec2 vUv;
    varying highp vec2 vL;
    varying highp vec2 vR;
    varying highp vec2 vT;
    varying highp vec2 vB;
    uniform sampler2D uPressure;
    uniform sampler2D uVelocity;

    void main () {
        float L = texture2D(uPressure, vL).x;
        float R = texture2D(uPressure, vR).x;
        float T = texture2D(uPressure, vT).x;
        float B = texture2D(uPressure, vB).x;
        vec2 velocity = texture2D(uVelocity, vUv).xy;
        velocity.xy -= vec2(R - L, T - B);
        gl_FragColor = vec4(velocity, 0.0, 1.0);
    }
`),S=function(){return r.bindBuffer(r.ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),r.STATIC_DRAW),r.vertexAttribPointer(0,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(0),function(e){r.bindFramebuffer(r.FRAMEBUFFER,e),r.drawElements(r.TRIANGLES,6,r.UNSIGNED_SHORT,0)}}(),x,h,se,ve,z,Ae,B=[],K,Ee,q=new _(Ve,De),Ie=new _(y,he),be=new _(y,He);new _(y,We);var X=new _(y,Ke),Y=new _(y,pe),re=new _(y,W),ge=new _(y,qe),we=new _(y,je),G=new _(y,k),A=new _(y,P),ne=new _(y,ue),ce=new _(y,xe),V=new _(y,_e),Te=new _(y,ye),Se=new _(y,Je),R=new $(y,ke);function le(){var e=Pe(u.SIM_RESOLUTION),t=Pe(u.DYE_RESOLUTION),n=D.halfFloatTexType,a=D.formatRGBA,o=D.formatRG,v=D.formatR,f=D.supportLinearFiltering?r.LINEAR:r.NEAREST;x==null?x=fe(t.width,t.height,a.internalFormat,a.format,n,f):x=de(x,t.width,t.height,a.internalFormat,a.format,n,f),h==null?h=fe(e.width,e.height,o.internalFormat,o.format,n,f):h=de(h,e.width,e.height,o.internalFormat,o.format,n,f),se=w(e.width,e.height,v.internalFormat,v.format,n,r.NEAREST),ve=w(e.width,e.height,v.internalFormat,v.format,n,r.NEAREST),z=fe(e.width,e.height,v.internalFormat,v.format,n,r.NEAREST),Le(),Qe()}function Le(){var e=Pe(u.BLOOM_RESOLUTION),t=D.halfFloatTexType,n=D.formatRGBA,a=D.supportLinearFiltering?r.LINEAR:r.NEAREST;Ae=w(e.width,e.height,n.internalFormat,n.format,t,a),B.length=0;for(var o=0;o<u.BLOOM_ITERATIONS;o++){var v=e.width>>o+1,f=e.height>>o+1;if(v<2||f<2)break;var E=w(v,f,n.internalFormat,n.format,t,a);B.push(E)}}function Qe(){var e=Pe(u.SUNRAYS_RESOLUTION),t=D.halfFloatTexType,n=D.formatR,a=D.supportLinearFiltering?r.LINEAR:r.NEAREST;K=w(e.width,e.height,n.internalFormat,n.format,t,a),Ee=w(e.width,e.height,n.internalFormat,n.format,t,a)}function w(e,t,n,a,o,v){r.activeTexture(r.TEXTURE0);var f=r.createTexture();r.bindTexture(r.TEXTURE_2D,f),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,v),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,v),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texImage2D(r.TEXTURE_2D,0,n,e,t,0,a,o,null);var E=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,E),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,f,0),r.viewport(0,0,e,t),r.clear(r.COLOR_BUFFER_BIT);var T=1/e,b=1/t;return{texture:f,fbo:E,width:e,height:t,texelSizeX:T,texelSizeY:b,attach:function(ir){return r.activeTexture(r.TEXTURE0+ir),r.bindTexture(r.TEXTURE_2D,f),ir}}}function fe(e,t,n,a,o,v){var f=w(e,t,n,a,o,v),E=w(e,t,n,a,o,v);return{width:e,height:t,texelSizeX:f.texelSizeX,texelSizeY:f.texelSizeY,get read(){return f},set read(T){f=T},get write(){return E},set write(T){E=T},swap:function(){var b=f;f=E,E=b}}}function Ze(e,t,n,a,o,v,f){var E=w(t,n,a,o,v,f);return Ie.bind(),r.uniform1i(Ie.uniforms.uTexture,e.attach(0)),S(E.fbo),E}function de(e,t,n,a,o,v,f){return e.width==t&&e.height==n||(e.read=Ze(e.read,t,n,a,o,v,f),e.write=w(t,n,a,o,v,f),e.width=t,e.height=n,e.texelSizeX=1/t,e.texelSizeY=1/n),e}function Fe(){var e=[];u.SHADING&&e.push("SHADING"),u.BLOOM&&e.push("BLOOM"),u.SUNRAYS&&e.push("SUNRAYS"),R.setKeywords(e)}Fe(),le(),nr(parseInt(Math.random()*20)+5);var Oe=Date.now(),j=0;Re();function Re(){var e=$e();me()&&le(),Ue(e),er(),u.PAUSED||ur(e),te(null),requestAnimationFrame(Re)}function $e(){var e=Date.now(),t=(e-Oe)/1e3;return t=Math.min(t,.016666),Oe=e,t}function me(){var e=I(p.clientWidth),t=I(p.clientHeight);return p.width!=e||p.height!=t?(p.width=e,p.height=t,!0):!1}function Ue(e){j+=e*u.COLOR_UPDATE_SPEED,j>=1&&(j=fr(j,0,1),U.forEach(function(t){t.color=O()}))}function er(){oe.length>0&&nr(oe.pop()),U.forEach(function(e){e.moved&&(e.moved=!1,Me(e))})}function ur(e){r.disable(r.BLEND),r.viewport(0,0,h.width,h.height),ce.bind(),r.uniform2f(ce.uniforms.texelSize,h.texelSizeX,h.texelSizeY),r.uniform1i(ce.uniforms.uVelocity,h.read.attach(0)),S(ve.fbo),V.bind(),r.uniform2f(V.uniforms.texelSize,h.texelSizeX,h.texelSizeY),r.uniform1i(V.uniforms.uVelocity,h.read.attach(0)),r.uniform1i(V.uniforms.uCurl,ve.attach(1)),r.uniform1f(V.uniforms.curl,u.CURL),r.uniform1f(V.uniforms.dt,e),S(h.write.fbo),h.swap(),ne.bind(),r.uniform2f(ne.uniforms.texelSize,h.texelSizeX,h.texelSizeY),r.uniform1i(ne.uniforms.uVelocity,h.read.attach(0)),S(se.fbo),be.bind(),r.uniform1i(be.uniforms.uTexture,z.read.attach(0)),r.uniform1f(be.uniforms.value,u.PRESSURE),S(z.write.fbo),z.swap(),Te.bind(),r.uniform2f(Te.uniforms.texelSize,h.texelSizeX,h.texelSizeY),r.uniform1i(Te.uniforms.uDivergence,se.attach(0));for(var t=0;t<u.PRESSURE_ITERATIONS;t++)r.uniform1i(Te.uniforms.uPressure,z.read.attach(1)),S(z.write.fbo),z.swap();Se.bind(),r.uniform2f(Se.uniforms.texelSize,h.texelSizeX,h.texelSizeY),r.uniform1i(Se.uniforms.uPressure,z.read.attach(0)),r.uniform1i(Se.uniforms.uVelocity,h.read.attach(1)),S(h.write.fbo),h.swap(),A.bind(),r.uniform2f(A.uniforms.texelSize,h.texelSizeX,h.texelSizeY),D.supportLinearFiltering||r.uniform2f(A.uniforms.dyeTexelSize,h.texelSizeX,h.texelSizeY);var n=h.read.attach(0);r.uniform1i(A.uniforms.uVelocity,n),r.uniform1i(A.uniforms.uSource,n),r.uniform1f(A.uniforms.dt,e),r.uniform1f(A.uniforms.dissipation,u.VELOCITY_DISSIPATION),S(h.write.fbo),h.swap(),r.viewport(0,0,x.width,x.height),D.supportLinearFiltering||r.uniform2f(A.uniforms.dyeTexelSize,x.texelSizeX,x.texelSizeY),r.uniform1i(A.uniforms.uVelocity,h.read.attach(0)),r.uniform1i(A.uniforms.uSource,x.read.attach(1)),r.uniform1f(A.uniforms.dissipation,u.DENSITY_DISSIPATION),S(x.write.fbo),x.swap()}function te(e){u.BLOOM&&ae(x.read,Ae),u.SUNRAYS&&(H(x.read,x.write,K),sr(K,Ee,1)),e==null||!u.TRANSPARENT?(r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.enable(r.BLEND)):r.disable(r.BLEND);var t=e==null?r.drawingBufferWidth:e.width,n=e==null?r.drawingBufferHeight:e.height;r.viewport(0,0,t,n);var a=e==null?null:e.fbo;e==null&&u.TRANSPARENT&&rr(a,t,n)}function rr(e,t,n){if(R.bind(),u.SHADING&&r.uniform2f(R.uniforms.texelSize,1/t,1/n),r.uniform1i(R.uniforms.uTexture,x.read.attach(0)),u.BLOOM){r.uniform1i(R.uniforms.uBloom,Ae.attach(1)),r.uniform1i(R.uniforms.uDithering,ditheringTexture.attach(2));var a=dr(ditheringTexture,t,n);r.uniform2f(R.uniforms.ditherScale,a.x,a.y)}u.SUNRAYS&&r.uniform1i(R.uniforms.uSunrays,K.attach(3)),S(e)}function ae(e,t){if(!(B.length<2)){var n=t;r.disable(r.BLEND),X.bind();var a=u.BLOOM_THRESHOLD*u.BLOOM_SOFT_KNEE+1e-4,o=u.BLOOM_THRESHOLD-a,v=a*2,f=.25/a;r.uniform3f(X.uniforms.curve,o,v,f),r.uniform1f(X.uniforms.threshold,u.BLOOM_THRESHOLD),r.uniform1i(X.uniforms.uTexture,e.attach(0)),r.viewport(0,0,n.width,n.height),S(n.fbo),Y.bind();for(var E=0;E<B.length;E++){var T=B[E];r.uniform2f(Y.uniforms.texelSize,n.texelSizeX,n.texelSizeY),r.uniform1i(Y.uniforms.uTexture,n.attach(0)),r.viewport(0,0,T.width,T.height),S(T.fbo),n=T}r.blendFunc(r.ONE,r.ONE),r.enable(r.BLEND);for(var b=B.length-2;b>=0;b--){var M=B[b];r.uniform2f(Y.uniforms.texelSize,n.texelSizeX,n.texelSizeY),r.uniform1i(Y.uniforms.uTexture,n.attach(0)),r.viewport(0,0,M.width,M.height),S(M.fbo),n=M}r.disable(r.BLEND),re.bind(),r.uniform2f(re.uniforms.texelSize,n.texelSizeX,n.texelSizeY),r.uniform1i(re.uniforms.uTexture,n.attach(0)),r.uniform1f(re.uniforms.intensity,u.BLOOM_INTENSITY),r.viewport(0,0,t.width,t.height),S(t.fbo)}}function H(e,t,n){r.disable(r.BLEND),ge.bind(),r.uniform1i(ge.uniforms.uTexture,e.attach(0)),r.viewport(0,0,t.width,t.height),S(t.fbo),we.bind(),r.uniform1f(we.uniforms.weight,u.SUNRAYS_WEIGHT),r.uniform1i(we.uniforms.uTexture,t.attach(0)),r.viewport(0,0,n.width,n.height),S(n.fbo)}function sr(e,t,n){q.bind();for(var a=0;a<n;a++)r.uniform2f(q.uniforms.texelSize,e.texelSizeX,0),r.uniform1i(q.uniforms.uTexture,e.attach(0)),S(t.fbo),r.uniform2f(q.uniforms.texelSize,0,e.texelSizeY),r.uniform1i(q.uniforms.uTexture,t.attach(0)),S(e.fbo)}function Me(e){var t=e.deltaX*u.SPLAT_FORCE,n=e.deltaY*u.SPLAT_FORCE;Ce(e.texcoordX,e.texcoordY,t,n,e.color)}function nr(e){for(var t=0;t<e;t++){var n=O();n.r*=10,n.g*=10,n.b*=10;var a=Math.random(),o=Math.random(),v=1e3*(Math.random()-.5),f=1e3*(Math.random()-.5);Ce(a,o,v,f,n)}}function Ce(e,t,n,a,o){r.viewport(0,0,h.width,h.height),G.bind(),r.uniform1i(G.uniforms.uTarget,h.read.attach(0)),r.uniform1f(G.uniforms.aspectRatio,p.width/p.height),r.uniform2f(G.uniforms.point,e,t),r.uniform3f(G.uniforms.color,n,a,0),r.uniform1f(G.uniforms.radius,vr(u.SPLAT_RADIUS/100)),S(h.write.fbo),h.swap(),r.viewport(0,0,x.width,x.height),r.uniform1i(G.uniforms.uTarget,x.read.attach(0)),r.uniform3f(G.uniforms.color,o.r,o.g,o.b),S(x.write.fbo),x.swap()}function vr(e){var t=p.width/p.height;return t>1&&(e*=t),e}document.addEventListener("mouseover",e=>{var t=I(e.offsetX),n=I(e.offsetY),a=U.find(function(o){return o.id==-1});a==null&&(a=new N),ze(a,-1,t,n)}),p.addEventListener("mousedown",function(e){var t=I(e.offsetX),n=I(e.offsetY),a=U.find(function(o){return o.id==-1});a==null&&(a=new N),ze(a,-1,t,n)}),p.addEventListener("mousemove",function(e){var t=U[0];if(t.down){var n=I(e.offsetX),a=I(e.offsetY);tr(t,n,a)}}),window.addEventListener("mouseup",function(){ar(U[0])}),p.addEventListener("touchstart",function(e){e.preventDefault();for(var t=e.targetTouches;t.length>=U.length;)U.push(new N);for(var n=0;n<t.length;n++){var a=I(t[n].pageX),o=I(t[n].pageY);ze(U[n+1],t[n].identifier,a,o)}}),p.addEventListener("touchmove",function(e){e.preventDefault();for(var t=e.targetTouches,n=0;n<t.length;n++){var a=U[n+1];if(a.down){var o=I(t[n].pageX),v=I(t[n].pageY);tr(a,o,v)}}},!1),window.addEventListener("touchend",function(e){for(var t=e.changedTouches,n=function(o){var v=U.find(function(f){return f.id==t[o].identifier});v!=null&&ar(v)},a=0;a<t.length;a++)n(a)}),window.addEventListener("keydown",function(e){e.code==="KeyP"&&(u.PAUSED=!u.PAUSED),e.key===" "&&oe.push(parseInt(Math.random()*20)+5)});function ze(e,t,n,a){e.id=t,e.down=!0,e.moved=!1,e.texcoordX=n/p.width,e.texcoordY=1-a/p.height,e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.deltaX=0,e.deltaY=0,e.color=O()}function tr(e,t,n){e.prevTexcoordX=e.texcoordX,e.prevTexcoordY=e.texcoordY,e.texcoordX=t/p.width,e.texcoordY=1-n/p.height,e.deltaX=cr(e.texcoordX-e.prevTexcoordX),e.deltaY=Xe(e.texcoordY-e.prevTexcoordY),e.moved=Math.abs(e.deltaX)>0||Math.abs(e.deltaY)>0}function ar(e){e.down=!0}function cr(e){var t=p.width/p.height;return t<1&&(e*=t),e}function Xe(e){var t=p.width/p.height;return t>1&&(e/=t),e}function O(){var e=lr(Math.random(),1,1);return e.r*=.15,e.g*=.15,e.b*=.15,e}function lr(e,t,n){var a,o,v,f,E,T,b,M;switch(f=Math.floor(e*6),E=e*6-f,T=n*(1-t),b=n*(1-E*t),M=n*(1-(1-E)*t),f%6){case 0:a=n,o=M,v=T;break;case 1:a=b,o=n,v=T;break;case 2:a=T,o=n,v=M;break;case 3:a=T,o=b,v=n;break;case 4:a=M,o=T,v=n;break;case 5:a=n,o=T,v=b;break}return{r:a,g:o,b:v}}function fr(e,t,n){var a=n-t;return a==0?t:(e-t)%a+t}function Pe(e){var t=r.drawingBufferWidth/r.drawingBufferHeight;t<1&&(t=1/t);var n=Math.round(e),a=Math.round(e*t);return r.drawingBufferWidth>r.drawingBufferHeight?{width:a,height:n}:{width:n,height:a}}function dr(e,t,n){return{x:t/e.width,y:n/e.height}}function I(e){var t=window.devicePixelRatio||1;return Math.floor(e*t)}function mr(e){if(e.length==0)return 0;for(var t=0,n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}}),[]}class Or extends yr{constructor(p){super(),Ar(this,p,Br,Pr,br,{})}}export{Or as component};
